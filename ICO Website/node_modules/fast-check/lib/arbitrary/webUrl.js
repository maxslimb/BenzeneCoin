"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.webUrl = void 0;
const array_1 = require("./array");
const constantFrom_1 = require("./constantFrom");
const constant_1 = require("./constant");
const option_1 = require("./option");
const tuple_1 = require("./tuple");
const webQueryParameters_1 = require("./webQueryParameters");
const webFragments_1 = require("./webFragments");
const webAuthority_1 = require("./webAuthority");
const webSegment_1 = require("./webSegment");
const Converters_1 = require("../check/arbitrary/definition/Converters");
const PartsToUrl_1 = require("./_internals/mappers/PartsToUrl");
const SegmentsToPath_1 = require("./_internals/mappers/SegmentsToPath");
function webUrl(constraints) {
    const c = constraints || {};
    const validSchemes = c.validSchemes || ['http', 'https'];
    const schemeArb = (0, constantFrom_1.constantFrom)(...validSchemes);
    const authorityArb = (0, webAuthority_1.webAuthority)(c.authoritySettings);
    const pathArb = (0, Converters_1.convertFromNext)((0, Converters_1.convertToNext)((0, array_1.array)((0, webSegment_1.webSegment)())).map(SegmentsToPath_1.segmentsToPathMapper, SegmentsToPath_1.segmentsToPathUnmapper));
    return (0, Converters_1.convertFromNext)((0, Converters_1.convertToNext)((0, tuple_1.tuple)(schemeArb, authorityArb, pathArb, c.withQueryParameters === true ? (0, option_1.option)((0, webQueryParameters_1.webQueryParameters)()) : (0, constant_1.constant)(null), c.withFragments === true ? (0, option_1.option)((0, webFragments_1.webFragments)()) : (0, constant_1.constant)(null))).map(PartsToUrl_1.partsToUrlMapper, PartsToUrl_1.partsToUrlUnmapper));
}
exports.webUrl = webUrl;
